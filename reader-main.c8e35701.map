{"version":3,"sources":["frog/reader-main.js"],"names":["console","log","THREE","Rx","R","WEBGL","isWebGLAvailable","document","body","appendChild","getWebGLErrorMessage","g_parts","push","g_parts_ref","g_controls","g_stats","g_headlight","g_camera","PerspectiveCamera","window","innerWidth","innerHeight","g_scene","Scene","g_renderer","WebGLRenderer","antialias","g_loader","STLLoader","g_material","MeshPhongMaterial","color","flatShading","side","DoubleSide","g_part","g_color","g_vehicle_ref_x","g_vehicle_ref_y","g_vehicle_ref_z","g_vehicle_dx","g_vehicle_dy","g_vehicle_dz","load_geom","name","file","load","geometry","computeBoundingBox","mesh","Mesh","add","view_scene","bbox","boundingBox","load_geom_ref","make_tires","compute_radii","make_wheels","i","vec","attributes","position","array","cnt","count","r","x","y","z","Math","sqrt","r_min","reduce","min","r_max","max","radii","map","geom","tire_lf","clone","tire_rf","tire_lr","tire_rr","init_tires","rotateX","degToRad","init_wheels","wheel_lf","wheel_rf","wheel_lr","wheel_rr","render","sceneBoundingBox","scene","bb","Box3","traverse","node","expandByObject","viewBoundingBox","box","camera","isEmpty","size","Vector3","getSize","ctr","getCenter","dir","getWorldDirection","fov","PI","distance","abs","length","sin","pos","multiplyScalar","copy","far","updateProjectionMatrix","init","setPixelRatio","devicePixelRatio","setSize","getElementById","domElement","TrackballControls","rotateSpeed","zoomSpeed","panSpeed","noZoom","noPan","staticMoving","dynamicDampingFactor","keys","addEventListener","background","Color","setRGB","DirectionalLight","light","AmbientLight","onWindowResize","aspect","handleResize","animate","requestAnimationFrame","update","create_checkboxes","parts","container","dl","createElement","id","dt","innerHTML","part","dd","checkbox","type","value","checked","onclick","data","visible","label","htmlFor","createTextNode","create_checkboxes_tires","create_checkboxes_wheels","create_color","slider","step","oninput","g","b","em","style","g_stamp","g_next_mode","g_next_args","g_ref_x","g_ref_y","g_ref_z","param0","C_x","C_y","T_w","T_h","T_d","H_d","param_param","T_h_f","T_d_f","H_d_f","data0","LF_x","LF_y","RF_x","RF_y","LR_x","LR_y","RR_x","RR_y","vLF_x","vLF_y","vRF_x","vRF_y","vLR_x","vLR_y","vRR_x","vRR_y","LF_w","vLF_w","RF_w","vRF_w","LR_w","vLR_w","RR_w","vRR_w","T_z","LF_z","vLF_z","RF_z","vRF_z","LR_z","vLR_z","RR_z","vRR_z","LF_d","RF_d","LR_d","RR_d","LF_h","RF_h","LR_h","RR_h","toObservableObject2","targetObject","subject","Subject","Proxy","set","target","oldValue","newValue","next","arg","get","param","get_stamps","o","i_max","pluck","o_min","f_prep","f_exe","a","n","f01","stamp","f02","f03","f04","f05","f06","f07","contains","inputs","outputs","stamps","F","T","S","H","phi","f08","f09","subscribe","tol","val","key","print","morph_tires","w0","w1","scale","r0","r1","m","morph_wheels","d0","d1","translate_tires","create_param_slider","dv","description","br","parseFloat"],"mappings":"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","file":"reader-main.c8e35701.map","sourceRoot":"..","sourcesContent":["// frog/reader.js\r\n\r\nconsole.log('Three-js included?', !!THREE);\r\nconsole.log('RxJS included?', !!Rx);\r\nconsole.log('Ramda included?', !!R);\r\n\r\nif( WEBGL.isWebGLAvailable() === false ) \r\n{\r\n  document.body.appendChild( WEBGL.getWebGLErrorMessage() );\r\n}\r\n\r\n// ----------------------------------------------------------------------------\r\n// parts to load\r\n// ----------------------------------------------------------------------------\r\n\r\nconst g_parts = []\r\n{\r\n  g_parts.push('body2')\r\n  g_parts.push('body')\r\n  /*\r\n  g_parts.push('glass')\r\n  g_parts.push('grill')\r\n  g_parts.push('interior')\r\n  g_parts.push('suspension')\r\n  g_parts.push('snorkle')\r\n  g_parts.push('nozzles')\r\n  g_parts.push('waterjet')\r\n  g_parts.push('exhaust')\r\n  g_parts.push('engine')\r\n  g_parts.push('brakes')\r\n  g_parts.push('tires')\r\n  g_parts.push('wheels')\r\n  */\r\n  g_parts.push('transmission')\r\n}\r\n\r\nconst g_parts_ref = []\r\n{\r\n  g_parts_ref.push('wheel-1')\r\n  g_parts_ref.push('tire-1')\r\n}\r\n\r\n// ----------------------------------------------------------------------------\r\n// main objects\r\n// ----------------------------------------------------------------------------\r\n\r\nconst g_camera   = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 1000 );\r\nconst g_scene    = new THREE.Scene();\r\nconst g_renderer = new THREE.WebGLRenderer( { antialias: true } );\r\nconst g_loader   = new THREE.STLLoader();\r\nvar   g_controls \r\nvar   g_stats\r\nvar   g_headlight\r\n\r\nconst g_material = new THREE.MeshPhongMaterial({ \r\n      color: 0x666666, \r\n      flatShading: false,\r\n      side: THREE.DoubleSide,\r\n});\r\n\r\nlet g_part = {}\r\n\r\nlet g_color = {}\r\ng_color.r = 0.2\r\ng_color.g = 0.3\r\ng_color.b = 0.4\r\n\r\nvar g_vehicle_ref_x = 12\r\nvar g_vehicle_ref_y = 1.5\r\nvar g_vehicle_ref_z = -49\r\nvar g_vehicle_dx    = 218\r\nvar g_vehicle_dy    = 150\r\nvar g_vehicle_dz    = 69/2.\r\n\r\nfunction load_geom( name )\r\n{\r\n  var file = \"data/\" + name + \".stl\"\r\n  g_loader.load(file, function (geometry) {\r\n    geometry.computeBoundingBox()\r\n    var mesh = new THREE.Mesh( geometry, g_material );\r\n    g_scene.add(mesh);\r\n    view_scene( g_scene )\r\n    g_part[name] = {}\r\n    g_part[name].mesh = mesh\r\n    g_part[name].bbox = geometry.boundingBox\r\n  });\r\n}\r\n\r\nfunction load_geom_ref( name )\r\n{\r\n  var file = \"data/\" + name + \".stl\"\r\n  g_loader.load(file, function (geometry) {\r\n    geometry.computeBoundingBox()\r\n    var mesh = new THREE.Mesh( geometry, g_material );\r\n    g_part[name] = {}\r\n    g_part[name].mesh = mesh\r\n    g_part[name].bbox = geometry.boundingBox\r\n    if( name === \"tire-1\" ) make_tires()\r\n    if( name === \"tire-1\" ) compute_radii('tire-1')\r\n    if( name === \"wheel-1\" ) make_wheels()\r\n  });\r\n}\r\n\r\nfunction compute_radii(name)\r\n{\r\n  vec = g_part[name].mesh.geometry.attributes.position.array\r\n  cnt = g_part[name].mesh.geometry.attributes.position.count\r\n  r = []\r\n  for( i=0; i < cnt; i++ ) \r\n  {\r\n    x = vec[i*3+0]\r\n    y = vec[i*3+1]\r\n    z = vec[i*3+2]\r\n    r.push( Math.sqrt( x*x + y*y ) )\r\n  }\r\n  r_min = R.reduce( R.min, +10000, r )\r\n  r_max = R.reduce( R.max, -10000, r )\r\n  g_part[name].radii = R.map( x => (x-r_min)/(r_max-r_min), r )\r\n}\r\n\r\nfunction make_tires()\r\n{\r\n  geom = g_part['tire-1'].mesh.geometry\r\n  var tire_lf = new THREE.Mesh( geom.clone(), g_material );\r\n  var tire_rf = new THREE.Mesh( geom.clone(), g_material );\r\n  var tire_lr = new THREE.Mesh( geom.clone(), g_material );\r\n  var tire_rr = new THREE.Mesh( geom.clone(), g_material );\r\n  g_scene.add(tire_lf);\r\n  g_scene.add(tire_rf);\r\n  g_scene.add(tire_lr);\r\n  g_scene.add(tire_rr);\r\n  g_part['tire_lf'] = {}\r\n  g_part['tire_rf'] = {}\r\n  g_part['tire_lr'] = {}\r\n  g_part['tire_rr'] = {}\r\n  g_part['tire_lf'].mesh = tire_lf\r\n  g_part['tire_rf'].mesh = tire_rf\r\n  g_part['tire_lr'].mesh = tire_lr\r\n  g_part['tire_rr'].mesh = tire_rr\r\n  init_tires()\r\n  view_scene( g_scene )\r\n}\r\n\r\nfunction init_tires()\r\n{\r\n  g_part['tire_lf'].mesh.geometry.rotateX( THREE.Math.degToRad(  90. ) )\r\n  g_part['tire_rf'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n  g_part['tire_lr'].mesh.geometry.rotateX( THREE.Math.degToRad(  90 ) )\r\n  g_part['tire_rr'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n\r\n  g_part['tire_lf'].mesh.position.x = g_vehicle_ref_x - g_vehicle_dx/2.\r\n  g_part['tire_lf'].mesh.position.y = g_vehicle_ref_y - g_vehicle_dy/2.\r\n  g_part['tire_lf'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n  g_part['tire_rf'].mesh.position.x = g_vehicle_ref_x - g_vehicle_dx/2.\r\n  g_part['tire_rf'].mesh.position.y = g_vehicle_ref_y + g_vehicle_dy/2.\r\n  g_part['tire_rf'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n  g_part['tire_lr'].mesh.position.x = g_vehicle_ref_x + g_vehicle_dx/2.\r\n  g_part['tire_lr'].mesh.position.y = g_vehicle_ref_y - g_vehicle_dy/2.\r\n  g_part['tire_lr'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n  g_part['tire_rr'].mesh.position.x = g_vehicle_ref_x + g_vehicle_dx/2.\r\n  g_part['tire_rr'].mesh.position.y = g_vehicle_ref_y + g_vehicle_dy/2.\r\n  g_part['tire_rr'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n}\r\n\r\nfunction init_wheels()\r\n{\r\n  g_part['wheel_lf'].mesh.geometry.rotateX( THREE.Math.degToRad(  90. ) )\r\n  g_part['wheel_rf'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n  g_part['wheel_lr'].mesh.geometry.rotateX( THREE.Math.degToRad(  90 ) )\r\n  g_part['wheel_rr'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n\r\n  g_part['wheel_lf'].mesh.position.x = g_vehicle_ref_x - g_vehicle_dx/2.\r\n  g_part['wheel_lf'].mesh.position.y = g_vehicle_ref_y - g_vehicle_dy/2.\r\n  g_part['wheel_lf'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n  g_part['wheel_rf'].mesh.position.x = g_vehicle_ref_x - g_vehicle_dx/2.\r\n  g_part['wheel_rf'].mesh.position.y = g_vehicle_ref_y + g_vehicle_dy/2.\r\n  g_part['wheel_rf'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n  g_part['wheel_lr'].mesh.position.x = g_vehicle_ref_x + g_vehicle_dx/2.\r\n  g_part['wheel_lr'].mesh.position.y = g_vehicle_ref_y - g_vehicle_dy/2.\r\n  g_part['wheel_lr'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n  g_part['wheel_rr'].mesh.position.x = g_vehicle_ref_x + g_vehicle_dx/2.\r\n  g_part['wheel_rr'].mesh.position.y = g_vehicle_ref_y + g_vehicle_dy/2.\r\n  g_part['wheel_rr'].mesh.position.z = g_vehicle_ref_z + g_vehicle_dz\r\n}\r\n\r\nfunction make_wheels()\r\n{\r\n  geom = g_part['wheel-1'].mesh.geometry\r\n  var wheel_lf = new THREE.Mesh( geom.clone(), g_material );\r\n  var wheel_rf = new THREE.Mesh( geom.clone(), g_material );\r\n  var wheel_lr = new THREE.Mesh( geom.clone(), g_material );\r\n  var wheel_rr = new THREE.Mesh( geom.clone(), g_material );\r\n  g_scene.add(wheel_lf);\r\n  g_scene.add(wheel_rf);\r\n  g_scene.add(wheel_lr);\r\n  g_scene.add(wheel_rr);\r\n  g_part['wheel_lf'] = {}\r\n  g_part['wheel_rf'] = {}\r\n  g_part['wheel_lr'] = {}\r\n  g_part['wheel_rr'] = {}\r\n  g_part['wheel_lf'].mesh = wheel_lf\r\n  g_part['wheel_rf'].mesh = wheel_rf\r\n  g_part['wheel_lr'].mesh = wheel_lr\r\n  g_part['wheel_rr'].mesh = wheel_rr\r\n  init_wheels()\r\n  view_scene( g_scene )\r\n  g_renderer.render( g_scene, g_camera );\r\n}\r\n\r\nfunction sceneBoundingBox( scene )\r\n{\r\n  var bb = new THREE.Box3()\r\n  g_scene.traverse( function( node ) {\r\n    if( node instanceof THREE.Mesh ) bb.expandByObject( node )\r\n  });\r\n  return bb;\r\n}\r\n\r\nfunction viewBoundingBox( box, camera )\r\n{\r\n  var verbose = 0\r\n  if( box.isEmpty() ) console.log(\"scene empty\")\r\n  if( box.isEmpty() ) return;\r\n  var size = new THREE.Vector3(); box.getSize(size)\r\n  var ctr  = new THREE.Vector3(); box.getCenter(ctr)\r\n  var dir  = new THREE.Vector3(); camera.getWorldDirection(dir)\r\n  if(verbose) console.log('bb:', box, box.getCenter( new THREE.Vector3() ) )\r\n  if(verbose) console.log('bb:', size )\r\n  var fov = camera.fov * ( Math.PI / 180 );\r\n  var distance = Math.abs( size.length() / Math.sin( fov / 2 ) );\r\n  distance *= 1.0\r\n  if(verbose) console.log('distance:', distance )\r\n  if(verbose) console.log('dir:', dir )\r\n  var pos = ctr.add( dir.multiplyScalar(-distance) )\r\n  if(verbose) console.log('cam.pos:', camera.position )\r\n  if(verbose) console.log('pos:', pos )\r\n  camera.position.copy(pos)\r\n  if(verbose) console.log('cam.pos:', camera.position )\r\n  if(verbose) console.log('far:', camera.far )\r\n  camera.far = 2*distance\r\n  if(verbose) console.log('far:', camera.far )\r\n  camera.updateProjectionMatrix()\r\n}\r\n\r\nfunction view_scene( scene )\r\n{\r\n  bb = sceneBoundingBox( scene )\r\n  viewBoundingBox( bb, g_camera )\r\n}\r\n\r\nfunction init() \r\n{\r\n  g_renderer.setPixelRatio( window.devicePixelRatio );\r\n  g_renderer.setSize( 0.65 *window.innerWidth, 0.65*window.innerHeight );\r\n  //document.body.appendChild( g_renderer.domElement );\r\n  document.getElementById(\"MyScene\").appendChild( g_renderer.domElement );\r\n\r\n  g_controls = new THREE.TrackballControls( g_camera, g_renderer.domElement );\r\n  g_controls.rotateSpeed = 2.5;\r\n  g_controls.zoomSpeed = -2.2;\r\n  g_controls.panSpeed = 0.8;\r\n  g_controls.noZoom = false;\r\n  g_controls.noPan = false;\r\n  g_controls.staticMoving = true;\r\n  g_controls.dynamicDampingFactor = 0.3;\r\n  g_controls.keys = [ 65, 83, 68 ];\r\n  g_controls.addEventListener( 'change', render );\r\n\r\n  g_scene.background = new THREE.Color( 0xcccccc );\r\n  g_scene.background = new THREE.Color( 0x000000 );\r\n  g_scene.background.setRGB(0.2,0.3,0.4)\r\n\r\n  for( i in g_parts ) load_geom( g_parts[i] )\r\n  for( i in g_parts_ref ) load_geom_ref( g_parts_ref[i] )\r\n\r\n  g_headlight = new THREE.DirectionalLight( 0xffffff );\r\n  g_headlight.position.copy( g_camera.position )\r\n  g_scene.add( g_headlight );\r\n\r\n  var light = new THREE.AmbientLight( 0xffffff );\r\n  g_scene.add( light );\r\n\r\n  //g_stats = new Stats();\r\n  //document.body.appendChild( g_stats.dom );\r\n\r\n  window.addEventListener( 'resize', onWindowResize, false );\r\n\r\n  render();\r\n}\r\n\r\nfunction onWindowResize() \r\n{\r\n  g_camera.aspect = window.innerWidth / window.innerHeight;\r\n  g_camera.updateProjectionMatrix();\r\n\r\n  g_renderer.setSize( 0.65*window.innerWidth, 0.65*window.innerHeight );\r\n\r\n  g_controls.handleResize();\r\n\r\n  render();\r\n}\r\n\r\nfunction animate() \r\n{\r\n  requestAnimationFrame( animate );\r\n  g_controls.update();\r\n}\r\n\r\nfunction render() \r\n{\r\n  g_headlight.position.copy( g_camera.position )\r\n  g_renderer.render( g_scene, g_camera );\r\n  //g_stats.update();\r\n}\r\n\r\n// ----------------------------------------------------------------------------\r\n// define gui controls\r\n// ----------------------------------------------------------------------------\r\n\r\n/*\r\n <dl id=\"checkboxes1\">\r\n        <dt>same label or term</dt>\r\n        <dd><input type=\"checkbox\" id=\"chk1\" /><label for=\"chk1\">checkbox 1</label></dd>\r\n        <dd><input type=\"checkbox\" id=\"chk2\" /><label for=\"chk2\">checkbox 2</label></dd>\r\n        <dd><input type=\"checkbox\" id=\"chk3\" /><label for=\"chk3\">checkbox 3</label></dd>\r\n        <dd><input type=\"checkbox\" id=\"chk4\" /><label for=\"chk4\">checkbox 4</label></dd>\r\n  </dl>\r\n*/\r\nfunction create_checkboxes(parts) \r\n{\r\n  var container = document.getElementById('checkboxes');\r\n  var dl = document.createElement('dl');\r\n      dl.id = \"checkboxes_dl\"\r\n\r\n  var dt = document.createElement('dt')\r\n      dt.innerHTML = \"Part visibility\"\r\n\r\n  dl.appendChild(dt)\r\n\r\n  for (var i = 0; i < parts.length; i++) \r\n  {\r\n    var part = parts[i];\r\n    console.log(part);\r\n\r\n    var dd = document.createElement('dd')\r\n\r\n    var checkbox = document.createElement('input');\r\n        checkbox.type = \"checkbox\";\r\n        checkbox.id = \"chk\" + parts[i]\r\n        checkbox.name = \"chk\" + parts[i]\r\n        checkbox.value = \"value\";\r\n        checkbox.checked = true;\r\n        checkbox.onclick = function(data) \r\n        {\r\n          return function() \r\n          { \r\n            //console.log(data); \r\n            checked = document.getElementById(\"chk\"+data).checked\r\n            g_part[data].mesh.visible = checked\r\n            g_renderer.render( g_scene, g_camera );\r\n          };\r\n        }(part)\r\n\r\n    var label = document.createElement('label')\r\n        label.htmlFor = \"chk\" + parts[i]\r\n        label.appendChild(document.createTextNode(parts[i]));\r\n\r\n    dd.appendChild(checkbox)\r\n    dd.appendChild(label)\r\n    dl.appendChild(dd)\r\n  }\r\n  container.appendChild(dl);\r\n}\r\n\r\nfunction create_checkboxes_tires() \r\n{\r\n    var dl = document.getElementById('checkboxes_dl');\r\n\r\n    var dd = document.createElement('dd')\r\n\r\n    var checkbox = document.createElement('input');\r\n        checkbox.type = \"checkbox\";\r\n        checkbox.id = \"chk_tires\"\r\n        checkbox.name = \"chk_tires\"\r\n        checkbox.value = \"value\";\r\n        checkbox.checked = true;\r\n        checkbox.onclick = function() \r\n        { \r\n          checked = document.getElementById(\"chk_tires\").checked\r\n          g_part['tire_lf'].mesh.visible = checked\r\n          g_part['tire_rf'].mesh.visible = checked\r\n          g_part['tire_lr'].mesh.visible = checked\r\n          g_part['tire_rr'].mesh.visible = checked\r\n          g_renderer.render( g_scene, g_camera );\r\n        };\r\n\r\n    var label = document.createElement('label')\r\n        label.htmlFor = \"chk_tires\"\r\n        label.appendChild(document.createTextNode(\"tires\"));\r\n\r\n    dd.appendChild(checkbox)\r\n    dd.appendChild(label)\r\n    dl.appendChild(dd)\r\n}\r\n\r\nfunction create_checkboxes_wheels() \r\n{\r\n    var dl = document.getElementById('checkboxes_dl');\r\n\r\n    var dd = document.createElement('dd')\r\n\r\n    var checkbox = document.createElement('input');\r\n        checkbox.type = \"checkbox\";\r\n        checkbox.id = \"chk_wheels\"\r\n        checkbox.name = \"chk_wheels\"\r\n        checkbox.value = \"value\";\r\n        checkbox.checked = true;\r\n        checkbox.onclick = function() \r\n        { \r\n          checked = document.getElementById(\"chk_wheels\").checked\r\n          g_part['wheel_lf'].mesh.visible = checked\r\n          g_part['wheel_rf'].mesh.visible = checked\r\n          g_part['wheel_lr'].mesh.visible = checked\r\n          g_part['wheel_rr'].mesh.visible = checked\r\n          g_renderer.render( g_scene, g_camera );\r\n        };\r\n\r\n    var label = document.createElement('label')\r\n        label.htmlFor = \"chk_wheels\"\r\n        label.appendChild(document.createTextNode(\"wheels\"));\r\n\r\n    dd.appendChild(checkbox)\r\n    dd.appendChild(label)\r\n    dl.appendChild(dd)\r\n}\r\n\r\n/*\r\n<div>\r\n    <label for=\"color_g\">color_g:</label>\r\n    <input type =\"range\" min=\"0\" max=\"1\" step=\"0.1\" value=\"0.3\"\r\n        oninput=\r\n        \"\r\n          color_g = this.value;\r\n          document.getElementById('color_g_label').innerHTML = color_g;\r\n          g_scene.background.setRGB(color_r, color_g, color_b );\r\n          g_renderer.render( g_scene, g_camera );\r\n        \"\r\n        name=\"color_g\" id=\"color_g\">\r\n    </input>\r\n    <em id=\"color_g_label\" style=\"font-style: normal;\"></em>\r\n</div>\r\n*/\r\nfunction create_color(x,value) \r\n{\r\n  var name = 'color_' + x\r\n  console.log( name )\r\n  var container = document.getElementById(name);\r\n\r\n  var label = document.createElement('label')\r\n      label.innerHTML = name + \":\"\r\n\r\n  var slider = document.createElement('input');\r\n      slider.type = 'range'\r\n      slider.min = '0'\r\n      slider.max = '1'\r\n      slider.step = '0.1'\r\n      slider.value = value\r\n      slider.oninput = function() \r\n      { \r\n        g_color[x] = this.value;\r\n        document.getElementById(name+'_label').innerHTML = g_color[x];\r\n        g_scene.background.setRGB(g_color.r, g_color.g, g_color.b );\r\n        g_renderer.render( g_scene, g_camera );\r\n      }\r\n\r\n  var em = document.createElement('em');\r\n      em.id = name + \"_label\"\r\n      em.style = \"font-style: normal\"\r\n      em.innerHTML = value\r\n\r\n  container.appendChild(label);\r\n  container.appendChild(slider);\r\n  container.appendChild(em);\r\n}\r\n\r\n// next file\r\n\r\n/**\r\nconst { Subject } = require('rxjs');\r\nconst { from } = require('rxjs');\r\nconst { map, filter, switchMap } = require('rxjs/operators');\r\nconst R = require('ramda');\r\n**/\r\n\r\nlet g_stamp = 0\r\nlet g_next_mode = 1\r\nlet g_next_args = []\r\nlet g_ref_x = 12\r\nlet g_ref_y = 1.5\r\nlet g_ref_z = -49\r\n\r\nlet param0 = // design parameters\r\n{ \r\n  C_x: [218, 0],\r\n  C_y: [150, 0],\r\n  T_w: [25.39, 0],\r\n  T_h: [12.0, 0],\r\n  T_d: [69.67, 0],\r\n  H_d: [45.67, 0],\r\n}\r\n\r\nlet param_param = // parameters of design parameters\r\n{ \r\n  T_h_f: 1.0,\r\n  T_d_f: 1.0,\r\n  H_d_f: 1.0,\r\n}\r\n\r\nlet data0 = // derived data, never explicitly set\r\n{ \r\n  // tire locations\r\n  LF_x: [0,0], LF_y: [0,0], \r\n  RF_x: [0,0], RF_y: [0,0], \r\n  LR_x: [0,0], LR_y: [0,0], \r\n  RR_x: [0,0], RR_y: [0,0], \r\n  // vehicle tire locations\r\n  vLF_x: [0,0], vLF_y: [0,0],\r\n  vRF_x: [0,0], vRF_y: [0,0], \r\n  vLR_x: [0,0], vLR_y: [0,0], \r\n  vRR_x: [0,0], vRR_y: [0,0], \r\n  // tire widths\r\n  LF_w: [0,0], vLF_w: [0,0],\r\n  RF_w: [0,0], vRF_w: [0,0],\r\n  LR_w: [0,0], vLR_w: [0,0],\r\n  RR_w: [0,0], vRR_w: [0,0],\r\n  // tire centers\r\n  T_z: [0,0],\r\n  LF_z: [0,0], vLF_z: [0,0],\r\n  RF_z: [0,0], vRF_z: [0,0],\r\n  LR_z: [0,0], vLR_z: [0,0],\r\n  RR_z: [0,0], vRR_z: [0,0],\r\n  // tire diameters\r\n  LF_d: [0,0], \r\n  RF_d: [0,0], \r\n  LR_d: [0,0], \r\n  RR_d: [0,0], \r\n  // tire side wall heights\r\n  LF_h: [0,0], \r\n  RF_h: [0,0], \r\n  LR_h: [0,0], \r\n  RR_h: [0,0], \r\n}\r\n\r\nconst toObservableObject2 = targetObject => {\r\n    const subject = new Rx.Subject();\r\n    return new Proxy( targetObject, {\r\n        set: (target, name, value) => {\r\n            const oldValue = target[name];\r\n            const newValue = value;\r\n            if( typeof value === 'object' )\r\n            {\r\n              if( target[name][1] > value[1] )\r\n              {\r\n                console.log( 'name = ', name )\r\n                throw 'stamp error'\r\n              }\r\n              else if( target[name][1] == value[1] )\r\n              {\r\n                // no-op\r\n              }\r\n              else\r\n              {\r\n                target[name] = value\r\n                if( g_next_mode )    subject.next({ name, oldValue, newValue, target });\r\n                else g_next_args.push({ subject: subject, arg: { name, oldValue, newValue, target }});\r\n              }\r\n            }\r\n            else if( typeof value === 'number' )\r\n            {\r\n              if( g_next_mode == 1 )\r\n              {\r\n                target[name] = [value,++g_stamp]\r\n                subject.next({ name, oldValue, newValue, target });\r\n              }\r\n              else\r\n              {\r\n                throw 'bad combo, probably need to send [value,stamp]'\r\n              }\r\n            }\r\n            else\r\n            {\r\n              console.log( 'name = ', name )\r\n              console.log( 'type = ',typeof value )\r\n              throw 'need to send object'\r\n            }\r\n        },\r\n\r\n        get: (target, name) => name == 'subject' ? subject : target[name]\r\n    });\r\n}\r\n\r\nconst param = toObservableObject2( param0 );\r\nconst data  = toObservableObject2( data0 );\r\n\r\nf01 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( name == 'C_y' )\r\n    {\r\n      stamp = param.C_y[1]\r\n      data.LF_y  = [g_ref_y + param.C_y[0]/2., stamp]\r\n      data.RF_y  = [g_ref_y - param.C_y[0]/2., stamp]\r\n      data.LR_y  = data.LF_y \r\n      data.RR_y  = data.RF_y\r\n      data.vLF_y = data.LF_y\r\n      data.vRF_y = data.RF_y\r\n      data.vLR_y = data.LR_y\r\n      data.vRR_y = data.RR_y\r\n    }\r\n  }\r\n}\r\n\r\nf02 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( name == 'T_w' )\r\n    {\r\n      data.LF_w = param.T_w\r\n      data.RF_w = param.T_w\r\n      data.LR_w = param.T_w\r\n      data.RR_w = param.T_w\r\n      data.vLF_w = data.LF_w\r\n      data.vRF_w = data.RF_w\r\n      data.vLR_w = data.LR_w\r\n      data.vRR_w = data.RR_w\r\n    }\r\n  }\r\n}\r\n\r\nf03 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( name == 'C_x' )\r\n    {\r\n      stamp = param.C_x[1]\r\n      data.LF_x = [g_ref_x - param.C_x[0]/2., stamp]\r\n      data.RF_x = data.LF_x\r\n      data.LR_x = [g_ref_x + param.C_x[0]/2., stamp]\r\n      data.RR_x = data.LR_x\r\n      data.vLF_x = data.LF_x \r\n      data.vRF_x = data.RF_x \r\n      data.vLR_x = data.LR_x\r\n      data.vRR_x = data.RR_x \r\n    }\r\n  }\r\n}\r\n\r\nf04 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( name == 'T_z' )\r\n    {\r\n      data.LF_z = data.T_z\r\n      data.RF_z = data.T_z\r\n      data.LR_z = data.T_z\r\n      data.RR_z = data.T_z\r\n      data.vLF_z = data.LF_z\r\n      data.vRF_z = data.RF_z\r\n      data.vLR_z = data.LR_z\r\n      data.vRR_z = data.RR_z\r\n    }\r\n  }\r\n}\r\n\r\nf05 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( name == 'T_d' )\r\n    {\r\n      stamp = param.T_d[1]\r\n      data.LF_d = param.T_d\r\n      data.RF_d = param.T_d\r\n      data.LR_d = param.T_d\r\n      data.RR_d = param.T_d\r\n      data.T_z = [0.5*param.T_d[0] + g_ref_z, stamp]\r\n    }\r\n  }\r\n}\r\n\r\nf06 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( name == 'T_h' )\r\n    {\r\n      data.LF_h = param.T_h\r\n      data.RF_h = param.T_h\r\n      data.LR_h = param.T_h\r\n      data.RR_h = param.T_h\r\n    }\r\n  }\r\n}\r\n\r\nfunction get_stamps( i, o )\r\n{\r\n  i_max = R.reduce( R.max,   0, R.pluck(1,i) )\r\n  o_min = R.reduce( R.min, 1e6, R.pluck(1,o) )\r\n  return [i_max,o_min]\r\n}\r\n\r\nfunction f_prep()\r\n{\r\n  g_next_args = []\r\n  g_next_mode = 0\r\n}\r\n\r\nfunction f_exe()\r\n{\r\n  g_next_mode = 1\r\n  for( a in g_next_args )\r\n  {\r\n    n = g_next_args[a]\r\n    n['subject'].next( n['arg'] )\r\n  }\r\n}\r\n\r\nf07 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( R.contains(name,['T_d']) )\r\n    {\r\n      inputs  = [ param.T_d ]\r\n      outputs = [ param.T_h, param.H_d ]\r\n      stamps  = get_stamps( inputs, outputs )\r\n      if( stamps[0] > stamps[1] )\r\n      {\r\n        f_prep()\r\n        F = param_param.T_d_f\r\n        T = 0.5*param.T_d[0]\r\n        S =     param.T_h[0]\r\n        H = 0.5*param.H_d[0]\r\n        phi = F*H + (F-1)*S\r\n        S = (F  )*T - phi\r\n        H = (1-F)*T + phi\r\n        stamp = param.T_d[1] \r\n        for( let i of inputs ) i[1] = stamps[0] \r\n        param.T_h = [S,stamps[0]] \r\n        param.H_d = [2*H,stamps[0]]\r\n        f_exe()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nf08 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( R.contains(name,['T_h']) )\r\n    {\r\n      inputs  = [ param.T_h ]\r\n      outputs = [ param.T_d, param.H_d ]\r\n      stamps  = get_stamps( inputs, outputs )\r\n      if( stamps[0] > stamps[1] )\r\n      {\r\n        f_prep()\r\n        F = param_param.T_h_f\r\n        T = 0.5*param.T_d[0]\r\n        S =     param.T_h[0]\r\n        H = 0.5*param.H_d[0]\r\n        phi = (1.-F)*H + F*T\r\n        T = (1.-F)*S + phi\r\n        H = (  -F)*S + phi\r\n        stamp = param.T_h[1] \r\n        param.T_d = [2.*T,stamps[0]] \r\n        param.H_d = [2.*H,stamps[0]] \r\n        f_exe()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nf09 = {\r\n  next: ({name, oldValue, newValue,target}) => {\r\n    if( R.contains(name,['H_d']) )\r\n    {\r\n      inputs  = [ param.H_d ]\r\n      outputs = [ param.T_d, param.T_h ]\r\n      stamps  = get_stamps( inputs, outputs )\r\n      if( stamps[0] > stamps[1] )\r\n      {\r\n        f_prep()\r\n        F = param_param.H_d_f\r\n        T = 0.5*param.T_d[0]\r\n        S =     param.T_h[0]\r\n        H = 0.5*param.H_d[0]\r\n        phi = (1-F)*S + F*T\r\n        T = (1-F)*H + phi\r\n        S = ( -F)*H + phi\r\n        stamp = param.H_d[1] \r\n        param.T_d = [2*T,stamp]\r\n        param.T_h = [S,stamp]\r\n        f_exe()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nparam.subject.subscribe(f01);\r\nparam.subject.subscribe(f02);\r\nparam.subject.subscribe(f03);\r\n data.subject.subscribe(f04);\r\nparam.subject.subscribe(f05);\r\nparam.subject.subscribe(f06);\r\nparam.subject.subscribe(f07);\r\nparam.subject.subscribe(f08);\r\nparam.subject.subscribe(f09);\r\n\r\n// check initial constraints\r\ntol = 1.e-6\r\nval = param0.T_d[0] - (param0.H_d[0] + 2*param0.T_h[0])\r\nif( Math.abs(val) > tol ) throw \"T_d,H_d,T_h contraint not met\"\r\n\r\ng_stamp++;\r\nfor( key in param0 ) {\r\n   console.log(`key = ${key} value = ${param0[key]}`)\r\n   param[key] = [param0[key][0],g_stamp]\r\n}\r\n\r\nfunction print()\r\n{\r\n  console.log( '---' )\r\n  console.log( 'parameter C-x:', param.C_x )\r\n  //console.log( 'parameter C-y:', param.C_y )\r\n  //console.log( 'parameter T-w:', param.T_w )\r\n  //console.log( 'parameter T-h:', param.T_h )\r\n  //console.log( 'parameter H-d:', param.H_d )\r\n  //console.log( 'parameter T-d:', param.T_d )\r\n  console.log( 'RF,RR-xy: (%f,%f) (%f,%f)', data.vRF_x[0], data.vRF_y[0], data.vRR_x[0], data.vRR_y[0] )\r\n  console.log( 'LF,LR-xy: (%f,%f) (%f,%f)', data.vLF_x[0], data.vLF_y[0], data.vLR_x[0], data.vLR_y[0] )\r\n  //console.log( 'LF-z,LR-z,LR-z,RR-z: (%d,%d,%d,%d)', data.vLF_z[0], data.vRF_z[0], data.vLR_z[0], data.vRR_z[0] )\r\n  //console.log( 'LF-w,LR-w,LR-w,RR-w: (%d,%d,%d,%d)', data.vLF_w[0], data.vRF_w[0], data.vLR_w[0], data.vRR_w[0] )\r\n  //console.log( 'LF-d,LR-d,LR-d,RR-d: (%d,%d,%d,%d)', data.LF_d[0], data.RF_d[0], data.LR_d[0], data.RR_d[0] )\r\n  //console.log( 'LF-h,LR-h,LR-h,RR-h: (%d,%d,%d,%d)', data.LF_h[0], data.RF_h[0], data.LR_h[0], data.RR_h[0] )\r\n  //console.log( '---' )\r\n}\r\nprint()\r\n//param.C_x = [7,++g_stamp]; console.log('parameter C-x was set to %d', param.C_x[0] ); print()\r\n//param.C_y = [3,++g_stamp]; console.log('parameter C-y was set to %d', param.C_y[0] ); print()\r\n//param.T_w = [0.11,++g_stamp]; console.log('parameter T-w was set to %d', param.T_w[0] ); print()\r\n\r\n//param.T_h = 0.3; console.log('parameter T-h was set to %f', param.T_h[0] ); print()\r\n//param_param.T_d_f = 0.5; console.log('param_param T-d-bf was set to %f', param_param.T_d_f ); print()\r\n//param.T_d = 2.11; console.log('parameter T-d was set to %f', param.T_d[0] ); print()\r\n//param.H_d = 1.0; console.log('parameter H-d was set to %f', param.H_d[0] ); print()\r\n//param.H_d = 2.0; console.log('parameter H-d was set to %f', param.H_d[0] ); print()\r\n\r\n//console.log( param )\r\n//console.log( data )\r\n\r\nfunction morph_tires()\r\n{\r\n  var geom = g_part['tire-1'].mesh.geometry.clone()\r\n\r\n  w0 = 25.39 \r\n  w1 = param.T_w[0]/w0\r\n\r\n  geom.scale(1,1,w1)\r\n\r\n  r0 = param.H_d[0]/2\r\n  r1 = param.T_d[0]/2\r\n  vec = geom.attributes.position.array\r\n  cnt = geom.attributes.position.count\r\n  radii = g_part['tire-1'].radii\r\n  for( i=0; i < cnt; i++ ) \r\n  {\r\n    x = vec[i*3+0]\r\n    y = vec[i*3+1]\r\n    m = Math.sqrt( x*x + y*y )\r\n    x /= m\r\n    y /= m\r\n    r = r0 + radii[i] * (r1-r0)\r\n    vec[i*3+0] = r*x\r\n    vec[i*3+1] = r*y\r\n  }\r\n\r\n  g_part['tire_lf'].mesh.geometry = geom.clone()\r\n  g_part['tire_rf'].mesh.geometry = geom.clone()\r\n  g_part['tire_lr'].mesh.geometry = geom.clone()\r\n  g_part['tire_rr'].mesh.geometry = geom.clone()\r\n\r\n  g_part['tire_lf'].mesh.geometry.rotateX( THREE.Math.degToRad(  90 ) )\r\n  g_part['tire_rf'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n  g_part['tire_lr'].mesh.geometry.rotateX( THREE.Math.degToRad(  90 ) )\r\n  g_part['tire_rr'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n}\r\n\r\nfunction morph_wheels()\r\n{\r\n  var geom = g_part['wheel-1'].mesh.geometry.clone()\r\n\r\n  w0 = 25.39 \r\n  w1 = param.T_w[0]/w0\r\n  d0 = 45.67 \r\n  d1 = param.H_d[0]/d0\r\n\r\n  geom.scale(d1,d1,w1)\r\n\r\n  g_part['wheel_lf'].mesh.geometry = geom.clone()\r\n  g_part['wheel_rf'].mesh.geometry = geom.clone()\r\n  g_part['wheel_lr'].mesh.geometry = geom.clone()\r\n  g_part['wheel_rr'].mesh.geometry = geom.clone()\r\n\r\n  g_part['wheel_lf'].mesh.geometry.rotateX( THREE.Math.degToRad(  90 ) )\r\n  g_part['wheel_rf'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n  g_part['wheel_lr'].mesh.geometry.rotateX( THREE.Math.degToRad(  90 ) )\r\n  g_part['wheel_rr'].mesh.geometry.rotateX( THREE.Math.degToRad( -90 ) )\r\n}\r\n\r\nfunction translate_tires()\r\n{\r\n  g_part['tire_lf'].mesh.position.x = data.vLF_x[0]\r\n  g_part['tire_lf'].mesh.position.y = data.vLF_y[0]\r\n  g_part['tire_lf'].mesh.position.z = data.vLF_z[0]\r\n  g_part['tire_rf'].mesh.position.x = data.vRF_x[0]\r\n  g_part['tire_rf'].mesh.position.y = data.vRF_y[0]\r\n  g_part['tire_rf'].mesh.position.z = data.vRF_z[0]\r\n  g_part['tire_lr'].mesh.position.x = data.vLR_x[0]\r\n  g_part['tire_lr'].mesh.position.y = data.vLR_y[0]\r\n  g_part['tire_lr'].mesh.position.z = data.vLR_z[0]\r\n  g_part['tire_rr'].mesh.position.x = data.vRR_x[0]\r\n  g_part['tire_rr'].mesh.position.y = data.vRR_y[0]\r\n  g_part['tire_rr'].mesh.position.z = data.vRR_z[0]\r\n\r\n  g_part['wheel_lf'].mesh.position.x = data.vLF_x[0]\r\n  g_part['wheel_lf'].mesh.position.y = data.vLF_y[0]\r\n  g_part['wheel_lf'].mesh.position.z = data.vLF_z[0]\r\n  g_part['wheel_rf'].mesh.position.x = data.vRF_x[0]\r\n  g_part['wheel_rf'].mesh.position.y = data.vRF_y[0]\r\n  g_part['wheel_rf'].mesh.position.z = data.vRF_z[0]\r\n  g_part['wheel_lr'].mesh.position.x = data.vLR_x[0]\r\n  g_part['wheel_lr'].mesh.position.y = data.vLR_y[0]\r\n  g_part['wheel_lr'].mesh.position.z = data.vLR_z[0]\r\n  g_part['wheel_rr'].mesh.position.x = data.vRR_x[0]\r\n  g_part['wheel_rr'].mesh.position.y = data.vRR_y[0]\r\n  g_part['wheel_rr'].mesh.position.z = data.vRR_z[0]\r\n}\r\n\r\nfunction create_param_slider(o)\r\n{\r\n  var container = document.getElementById('param_'+o.dv);\r\n\r\n  var label = document.createElement('label')\r\n      label.innerHTML = o.description\r\n\r\n  var br = document.createElement('br')\r\n\r\n  var slider = document.createElement('input');\r\n      slider.type = 'range'\r\n      slider.id = o.dv + \"_slider\"\r\n      slider.min = o.min\r\n      slider.max = o.max\r\n      slider.step = o.step\r\n      slider.value = o.value\r\n      slider.oninput = o.oninput()\r\n\r\n  var em = document.createElement('em');\r\n      em.id = o.dv + \"_label\"\r\n      em.style = \"font-style: normal\"\r\n      em.innerHTML = o.value\r\n\r\n  container.appendChild(label);\r\n  container.appendChild(br);\r\n  container.appendChild(slider);\r\n  container.appendChild(em);\r\n}\r\n\r\n// create slider elements\r\n\r\ncreate_param_slider({\r\n  dv: 'C_x',\r\n  description: 'Tire contact point length',\r\n  value: param.C_x[0],\r\n  min: 150,\r\n  max: 300,\r\n  step: 10,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param.C_x = parseFloat(this.value);\r\n      document.getElementById('C_x_label').innerHTML = param.C_x[0]\r\n      translate_tires()\r\n      g_renderer.render( g_scene, g_camera );\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'C_y',\r\n  description: 'Tire contact point width',\r\n  value: param.C_y[0],\r\n  min: 100,\r\n  max: 250,\r\n  step: 10,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param.C_y = parseFloat(this.value);\r\n      document.getElementById('C_y_label').innerHTML = param.C_y[0]\r\n      translate_tires()\r\n      g_renderer.render( g_scene, g_camera );\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'T_w',\r\n  description: 'Tire width',\r\n  value: param.T_w[0],\r\n  min: 10,\r\n  max: 50,\r\n  step: 2,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param.T_w = parseFloat(this.value);\r\n      document.getElementById('T_w_label').innerHTML = param.T_w[0]\r\n      morph_tires()\r\n      morph_wheels()\r\n      translate_tires()\r\n      g_renderer.render( g_scene, g_camera );\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'T_d',\r\n  description: 'Tire diameter',\r\n  value: param.T_d[0],\r\n  min: 40,\r\n  max: 100,\r\n  step: 5,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param.T_d = parseFloat(this.value);\r\n      document.getElementById('T_d_label').innerHTML = param.T_d[0]\r\n      document.getElementById('T_h_label').innerHTML = param.T_h[0]\r\n      document.getElementById('H_d_label').innerHTML = param.H_d[0]\r\n      document.getElementById('T_h_slider').value = param.T_h[0]\r\n      document.getElementById('H_d_slider').value = param.H_d[0]\r\n      morph_tires()\r\n      morph_wheels()\r\n      translate_tires()\r\n      g_renderer.render( g_scene, g_camera );\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'T_d_f',\r\n  description: 'Tire diameter blend factor',\r\n  value: param_param.T_d_f,\r\n  min: 0,\r\n  max: 1,\r\n  step: 0.1,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param_param.T_d_f = parseFloat(this.value);\r\n      document.getElementById('T_d_f_label').innerHTML = param_param.T_d_f\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'H_d',\r\n  description: 'Hub diameter',\r\n  value: param.H_d[0],\r\n  min: 10,\r\n  max: 70,\r\n  step: 5,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param.H_d = parseFloat(this.value);\r\n      document.getElementById('H_d_label').innerHTML = param.H_d[0]\r\n      document.getElementById('T_h_label').innerHTML = param.T_h[0]\r\n      document.getElementById('T_d_label').innerHTML = param.T_d[0]\r\n      document.getElementById('T_h_slider').value = param.T_h[0]\r\n      document.getElementById('T_d_slider').value = param.T_d[0]\r\n      morph_tires()\r\n      morph_wheels()\r\n      translate_tires()\r\n      g_renderer.render( g_scene, g_camera );\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'H_d_f',\r\n  description: 'Hub diameter blend factor',\r\n  value: param_param.H_d_f,\r\n  min: 0,\r\n  max: 1,\r\n  step: 0.1,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param_param.H_d_f = parseFloat(this.value);\r\n      document.getElementById('H_d_f_label').innerHTML = param_param.H_d_f\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'T_h',\r\n  description: 'Tire sidewall height',\r\n  value: param.T_h[0],\r\n  min: 3,\r\n  max: 20,\r\n  step: 2,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param.T_h = parseFloat(this.value);\r\n      document.getElementById('T_h_label').innerHTML = param.T_h[0]\r\n      document.getElementById('H_d_label').innerHTML = param.H_d[0]\r\n      document.getElementById('T_d_label').innerHTML = param.T_d[0]\r\n      document.getElementById('H_d_slider').value = param.H_d[0]\r\n      document.getElementById('T_d_slider').value = param.T_d[0]\r\n      morph_tires()\r\n      morph_wheels()\r\n      translate_tires()\r\n      g_renderer.render( g_scene, g_camera );\r\n    }\r\n  },\r\n})\r\n\r\ncreate_param_slider({\r\n  dv: 'T_h_f',\r\n  description: 'Tire sidewall height blend factor',\r\n  value: param_param.T_h_f,\r\n  min: 0,\r\n  max: 1,\r\n  step: 0.1,\r\n  oninput: function()\r\n  {\r\n    return function() \r\n    { \r\n      param_param.T_h_f = parseFloat(this.value);\r\n      document.getElementById('T_h_f_label').innerHTML = param_param.T_h_f\r\n    }\r\n  },\r\n})\r\n\r\n\r\n// ----------------------------------------------------------------------------\r\n// create elements\r\n// ----------------------------------------------------------------------------\r\n\r\ncreate_checkboxes(g_parts)\r\ncreate_checkboxes_wheels()\r\ncreate_checkboxes_tires()\r\ncreate_color('r',g_color.r)\r\ncreate_color('g',g_color.g)\r\ncreate_color('b',g_color.b)\r\ninit();\r\nanimate();\r\n"]}